!function(){"use strict";const e=document.body,t={lerp:(e,t,i)=>e+(t-e)*i,distance:(e,t,i,s)=>Math.hypot(i-e,s-t)},i=t=>{let i=0,s=0;return t||(t=window.event),t.pageX||t.pageY?(i=t.pageX,s=t.pageY):(t.clientX||t.clientY)&&(i=t.clientX+e.scrollLeft,s=t.clientY+e.scrollTop),{x:i,y:s}};class s{constructor(e){this.el=e,this.referenceImages=[],this.placeholderElements=[],[...this.el.querySelectorAll(".nectar-image-trail__list img")].forEach(e=>{this.referenceImages.push({src:void 0!==e.dataset.nectarImgSrc&&null!==e.dataset.nectarImgSrc?e.dataset.nectarImgSrc:e.src})}),[...this.el.querySelectorAll(".nectar-image-trail__list .nectar-image-trail__image--placeholder")].forEach(e=>{this.placeholderElements.push(e)}),this.referenceImagesTotal=this.referenceImages.length,this.imgPosition=0,this.zIndexVal=1,this.threshold=void 0!==this.el.dataset.frequency&&null!==this.el.dataset.frequency?this.el.dataset.frequency:100,this.threshold=parseFloat(this.threshold),this.duration=void 0!==this.el.dataset.duration&&null!==this.el.dataset.duration?this.el.dataset.duration:1,this.duration=1e3*parseFloat(this.duration),this.randomize="true"===this.el.dataset.randomize,this.randomizeRotation=void 0!==this.el.dataset.randomizeRotation&&null!==this.el.dataset.randomizeRotation&&this.el.dataset.randomizeRotation,this.randomizeRotation="true"===this.randomizeRotation,this.lerp=void 0!==this.el.dataset.lerp&&null!==this.el.dataset.lerp?this.el.dataset.lerp:70,this.lerp=Math.max(parseFloat((100-this.lerp)/100),.1),this.mousePos={x:0,y:0},this.lastMousePos={x:0,y:0},this.cacheMousePos={x:0,y:0},this.animating=!1,this.animationIn=this.el.dataset.animationIn||"none",this.animationOut=this.el.dataset.animationOut||"none",this.swiftOut="cubicBezier(0,.2,.2,1)",this.swiftOut2="easeOutQuart",this.styleSettings={none:{in:{opacity:{value:1,duration:0,easing:"easeOutExpo"}},out:{opacity:{value:0,easing:"easeOutExpo",duration:0}}},scale:{in:{opacity:{value:[0,1],duration:300,easing:"easeOutCubic"},scale:{value:[0,1],duration:this.duration,easing:this.swiftOut}},out:{opacity:{value:[1,0],duration:300,easing:"easeOutCubic",delay:Math.max(this.duration-500,0)},scale:{value:[1,0],duration:this.duration-200,easing:this.swiftOut2}}},circle_mask:{in:{opacity:{value:[0,1],duration:200,easing:"easeOutCubic"},clipPath:{value:["circle(0% at 50% 50%)","circle(75% at 50% 50%)"],duration:this.duration,easing:this.swiftOut}},out:{opacity:0,easing:"easeInOutCubic",duration:250}},fade:{in:{opacity:{value:[0,1],duration:400,easing:this.swiftOut}},out:{opacity:0,easing:this.swiftOut2,duration:400}}},this.renderedImages=[],this.maxRenderedImages=100,this.el.addEventListener("mousemove",e=>{const t=i(e),s=this.el.getBoundingClientRect(),a=window.pageXOffset||document.documentElement.scrollLeft,o=window.pageYOffset||document.documentElement.scrollTop;this.mousePos={x:t.x-(s.left+a),y:t.y-(s.top+o)}}),this.isVisible=!1,this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?(this.isVisible=!0,this.animating||(this.animating=!0,this.render())):(this.isVisible=!1,this.animating=!1)})},{threshold:0}),this.observer.observe(this.el)}render(){if(!this.isVisible)return;let e=t.distance(this.mousePos.x,this.mousePos.y,this.lastMousePos.x,this.lastMousePos.y);this.cacheMousePos.x=t.lerp(this.cacheMousePos.x||this.mousePos.x,this.mousePos.x,this.lerp),this.cacheMousePos.y=t.lerp(this.cacheMousePos.y||this.mousePos.y,this.mousePos.y,this.lerp),e>this.threshold&&(this.randomize?0===this.referenceImagesTotal?this.imgPosition=Math.floor(6*Math.random()):this.imgPosition=Math.floor(Math.random()*this.referenceImagesTotal):0===this.referenceImagesTotal?this.imgPosition=(this.imgPosition+1)%6:this.imgPosition=this.imgPosition<this.referenceImagesTotal-1?this.imgPosition+1:0,this.showNextImage(),++this.zIndexVal,this.lastMousePos=Object.assign({},this.mousePos)),requestAnimationFrame(()=>this.render())}showNextImage(){let e;if(0===this.referenceImagesTotal){e=document.createElement("div");const i=this.imgPosition%6+1;let s="nectar-aspect-ratio--3-2";if(this.placeholderElements.length>0){const e=this.placeholderElements[0].className.split(" ");for(var t=0;t<e.length;t++)if(0===e[t].indexOf("nectar-aspect-ratio--")){s=e[t];break}}e.className="nectar-image-trail__image "+s+" nectar-image-trail__image--placeholder nectar-image-trail--gradient-"+i}else{const t=this.referenceImages[this.imgPosition];if(!t)return;(e=document.createElement("img")).className="nectar-image-trail__image",e.src=t.src}if(this.referenceImagesTotal>0&&this.referenceImages[this.imgPosition]){const t=this.referenceImages[this.imgPosition];e.style.width=t.width+"px",e.style.height=t.height+"px"}e.style.willChange="transform, opacity";const i=this.el.querySelector(".nectar-image-trail__list img:nth-child("+(this.imgPosition+1)+")");if(i&&e.classList.add(...i.classList),this.el.appendChild(e),this.renderedImages.push(e),this.renderedImages.length>this.maxRenderedImages){const e=this.renderedImages.shift();e&&e.parentNode&&e.remove()}const s=e.getBoundingClientRect();anime.remove(e),anime.set(e,{opacity:0,zIndex:this.zIndexVal,translateX:this.cacheMousePos.x-s.width/2,translateY:this.cacheMousePos.y-s.height/2,scale:1,rotate:!0===this.randomizeRotation?40*Math.random()-20:0}),anime.timeline().add({targets:e,...this.styleSettings[this.animationIn].in,translateX:{value:this.mousePos.x-s.width/2,duration:this.duration,easing:"easeOutExpo"},translateY:{value:this.mousePos.y-s.height/2,duration:this.duration,easing:"easeOutExpo"}}).add({targets:e,...this.styleSettings[this.animationOut].out,complete:()=>{e.remove();const t=this.renderedImages.indexOf(e);-1!==t&&this.renderedImages.splice(t,1)}})}}let a=[];function o(){a=[];const e=document.querySelectorAll(".nectar-image-trail");0!==e.length&&e.forEach((e,t)=>{a[t]=new s(e)})}document.addEventListener("DOMContentLoaded",o),jQuery(window).on("vc_reload",()=>{setTimeout(o,200)})}();